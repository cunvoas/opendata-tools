<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:insert="~{fragments/fragment-head :: head}"></head>

<body class="sb-nav-fixed">
	<script th:inline="javascript">
		function resetPwd(uId) {
			if (confirm([[#{contributor.resetPasswpord.text}]])) {
				sUrl = window.location.protocol + "//" + window.location.host + [[@{/mvc/management/contrib/resetPassword}]] + '?id=' + uId;
				document.location.href = sUrl;
			}
		}
	</script>

	<div th:insert="~{fragments/fragment-navUp :: navUp}"></div>
	<div id="layoutSidenav">
		<div th:insert="~{fragments/fragment-navLeft :: navLeft}"></div>

		<div id="layoutSidenav_content">
			<main>

				<div class="container-fluid">
					<!-- Header Section -->
					<div class="row mb-4 mt-4">
						<div class="col-12">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<h1 class="mb-1" th:text="#{contributor.title}">title</h1>
									<p class="text-muted mb-0">Gestion des contributeurs</p>
								</div>
								<div class="text-end">
									<a th:href="@{/mvc/management/contrib/add}" class="btn btn-primary">
										<i class="fas fa-plus me-2"></i><span th:text="#{contributor.add}">Ajouter</span>
									</a>
								</div>
							</div>
						</div>
					</div>

					<!-- Table Section -->
					<div class="row">
						<div class="col-12">
							<div class="card border-0 shadow-sm">
								<div class="card-header bg-gradient text-white py-3">
									<h5 class="mb-0"><i class="fas fa-users me-2"></i><span th:text="#{contributor.title}">Contributeurs</span></h5>
								</div>
								<div class="card-body p-0">
									<div class="table-responsive">
										<table class="table table-hover mb-0" id="datatablesSimple">
											<thead class="table-light">
												<tr>
													<th class="text-nowrap"><i class="fas fa-user me-1 text-muted"></i><span th:text="#{contributor.table.login}" /></th>
													<th class="text-nowrap"><i class="fas fa-id-card me-1 text-muted"></i><span th:text="#{contributor.table.name}" /></th>
													<th class="text-nowrap"><i class="fas fa-user-tie me-1 text-muted"></i><span th:text="#{contributor.table.surname}" /></th>
													<th class="text-nowrap"><i class="fas fa-shield me-1 text-muted"></i><span th:text="#{contributor.table.role}" /></th>
													<th class="text-nowrap"><i class="fas fa-building me-1 text-muted"></i><span th:text="#{contributor.table.asso}" /></th>
													<th class="text-center text-nowrap"><i class="fas fa-cogs me-1 text-muted"></i><span th:text="#{contributor.table.link}" /></th>
												</tr>
											</thead>
											<tbody>
												<tr th:each="contrib : ${listContributeur}" class="align-middle">
													<td>
														<span class="badge bg-light text-dark" th:text="${contrib.login}"></span>
													</td>
													<td>
														<strong th:text="${contrib.nom}" />
													</td>
													<td class="text-muted small" th:text="${contrib.prenom}" />
													<td>
														<span class="badge bg-info text-white" th:text="${contrib.role}" />
													</td>
													<td class="small" th:text="${contrib.association.nom}" />
													<td class="text-center">
														<div class="btn-group btn-group-sm" role="group">
															<a th:href="@{/mvc/management/contrib/edit?id={idContrib}(idContrib=${contrib.id})}" class="btn btn-sm btn-outline-primary" th:title="#{contributor.table.link}" title="Éditer">
																<i class="fas fa-edit"></i>
															</a>
															<a href="#" th:onclick="'javascript:resetPwd(\''+ ${contrib.id} +'\');'" th:attr="userid=${contrib.id}" class="btn btn-sm btn-outline-warning" th:title="#{contributor.table.resetPwd}" title="Réinitialiser le mot de passe">
																<i class="fas fa-key"></i>
															</a>
														</div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>

			</main>
		</div> <!-- layoutSidenav_content -->
	</div> <!-- layoutSidenav -->

	<style>
		/* Custom styles for enhanced design */
		.bg-gradient {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		}

		.card {
			transition: all 0.3s ease;
		}

		.card:hover {
			box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1) !important;
		}

		.table-hover tbody tr:hover {
			background-color: rgba(102, 126, 234, 0.05);
		}

		.form-label {
			font-weight: 600;
			color: #495057;
		}

		.form-floating > label {
			color: #6c757d;
		}

		.btn-group-sm .btn {
			padding: 0.25rem 0.5rem;
			font-size: 0.85rem;
		}

		.badge {
			font-weight: 500;
			padding: 0.4rem 0.6rem;
		}

		/* Smooth transitions for form elements */
		.form-select, .form-control {
			transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
		}

		.form-select:focus, .form-control:focus {
			border-color: #667eea;
			box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
		}

		/* Header styling */
		h1 {
			color: #2c3e50;
			font-weight: 700;
		}

		/* Table styling improvements */
		.table-light th {
			border-bottom: 2px solid #dee2e6;
			font-weight: 600;
			color: #495057;
		}

		.text-muted.small {
			font-size: 0.85rem;
		}

		.font-monospace {
			font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
		}
	</style>

	<div th:insert="~{fragments/fragment-footer :: footer}"></div>

	<div th:insert="~{fragments/fragment-jslibs :: appPage}"></div>

	<script th:src="@{/mvc/static/js/scripts.js}"></script>
	<script th:inline="javascript">
		window.addEventListener('DOMContentLoaded', event => {
			// Simple-DataTables
			// https://github.com/fiduswriter/Simple-DataTables/wiki

			const datatablesSimple = document.getElementById('datatablesSimple');
			if (datatablesSimple) {
				new simpleDatatables.DataTable(datatablesSimple);
			}
		});
	</script>

</body>
</html>
